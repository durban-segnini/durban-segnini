.page-wrapper {
  display: grid;
  grid-template-areas:
    "header"
    "main"
    "footer";
  grid-template-rows: auto 1fr auto;
  min-height: 100vh;
}

header {
  grid-area: header;
}

main {
  grid-area: main;
}

footer {
  grid-area: footer;
}

.cq-grid {
  :has(> &) {
    container-type: inline-size;
  }

  & img {
    width: 100%;
    object-fit: cover;
  }

  display: grid;
  --gap: 3em;
  gap: var(--gap, 1em);
  grid-template-columns: repeat(4, 1fr);

  @container (max-width: 500px) {
    grid-template-columns: repeat(2, 1fr);
    gap: 1em;
  }

  align-items: start;
}

.grid-stack {
  display: grid;
  grid-template-rows: auto 1fr;
  margin-bottom: 5rem;
  gap: 3rem;
}

.grid-stack > *:not(:first-child) {
  margin-top: 4rem;
}

.section-intro {

  /*

  use like this

  <section class="section-intro">
    <h1 class="section-title">
    </h1>
    <div class="any-class-name">
    </div>
  </section>

  The second child will be positioned in the picker grid area

  */

  :has(> &) {
    container-type: inline-size ;
  }

  display: grid;
  grid-template-columns: repeat(2, 1fr);
  grid-template-areas:
    "intro ."
    "under .";
  gap: 0.5rem;
  align-content: start;

  & .section-title {
    grid-area: intro;
    margin-bottom: unset;
  }

  & > :nth-child(2) {
    grid-area: under;
    border-top: 1px solid var(--color-text-secondary);
    display: flex;
    justify-content: flex-end;
    align-items: center;
  }
  
  &[data-one-quarter-grid="true"] {
    grid-template-columns: 1fr 3fr;
  }

  @container (max-width: 500px) {
    & {
      gap: 0.7rem;
      grid-template-columns: 1fr;
    }

    &[data-one-quarter-grid="true"] {
      grid-template-columns: 1fr;
    }
  
    & .section-title {
      grid-column: 1;
      text-align: left;
    }
  
    & > :nth-child(2) {
      grid-column: 1;
      justify-content: center;
      padding-top: 0.5rem;
    }
  }
}

/* Archive page specific override - disable 2-grid system */
.archive-page .section-intro {
  display: block !important;
  
  .section-title {
    margin-bottom: unset;
  }
  
  > :nth-child(2) {
    display: flex;
    justify-content: flex-start;
    align-items: center;
    width: 100% !important;
    border-top: 1px solid var(--color-text-secondary);
    padding-top: 0;
    margin-top: 0.5rem;
  }
}
